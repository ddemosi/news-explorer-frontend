(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],{137:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s(1),a=s.n(r),c=s(43),o=s.n(c),i=(s(52),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,138)).then((function(t){var s=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),r(e),a(e),c(e)}))}),l=s(3),u=s(10),d=s(4),p=a.a.createContext(),h=s(16),j=s(17),b=new(function(){function e(t){var s=t.url,n=t.headers,r=t.credentialPreference;Object(h.a)(this,e),this._url=s,this._headers=n,this._credential=r}return Object(j.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"register",value:function(e,t,s){var n=this;return fetch("".concat(this._url,"/signup"),{method:"POST",credentials:this._credential,headers:this._headers,body:JSON.stringify({email:e,password:t,name:s})}).then((function(e){return n._checkResponse(e)}))}},{key:"signin",value:function(e,t){var s=this;return fetch("".concat(this._url,"/signin"),{method:"POST",credentials:this._credential,headers:this._headers,body:JSON.stringify({email:e,password:t})}).then((function(e){return s._checkResponse(e)}))}},{key:"signout",value:function(){var e=this;return fetch("".concat(this._url,"/users/logout"),{credentials:this._credential,headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{credentials:this._credential,headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"getArticles",value:function(){var e=this;return fetch("".concat(this._url,"/articles"),{credentials:this._credential,headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"addArticle",value:function(e){var t=this;return fetch("".concat(this._url,"/articles"),{credentials:this._credential,method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteArticle",value:function(e){var t=this;return fetch("".concat(this._url,"/articles/").concat(e),{credentials:this._credential,method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}}]),e}())({url:"http://api.danny-news-explorer.students.nomoreparties.site",headers:{"Content-Type":"application/json"},credentialPreference:"include"}),g=function(e){return Object(n.jsxs)("div",{className:"navbar ".concat(e.isNavOpen?"navbar_active":""),children:[Object(n.jsx)(u.c,{to:"/",exact:!0,activeClassName:"navbar__link_active",className:"navbar__link ".concat(e.navigationLinkColors("navbar__link_dark")),children:"Home"}),e.isLoggedIn?Object(n.jsx)(u.c,{to:"/saved-news",exact:!0,activeClassName:"navbar__link_active_dark",className:"navbar__link ".concat(e.navigationLinkColors("navbar__link_dark")),children:"Saved articles"}):void 0]})},m=function(e){var t=e.togglePopup,s=e.toggleFormPopup,a=e.toggleIsRegisterPopup,c=Object(r.useState)(!1),o=Object(l.a)(c,2),i=o[0],u=o[1],h=Object(r.useContext)(p),j=Object(d.g)(),m=Object(r.useCallback)((function(){t(!0),s(!0),a(!1),u(!1)}),[t,s,a,u]);function f(t){return e.isSavedNewsRoute&&!i?t:(e.isSavedNewsRoute,"")}return function(e){var t=Object(r.useRef)(!0);t.current&&e(),t.current=!1}((function(){j.state=null})),Object(r.useEffect)((function(){null!==j.state&&void 0!==j.state&&j.state.redirected&&m()}),[j.state,m]),Object(n.jsx)("header",{className:"header ".concat(i?"header_nav-active":""),children:Object(n.jsxs)("div",{className:"header__size",children:[Object(n.jsx)("p",{className:"header__logo ".concat(f("header__logo_dark")," "),children:"NewsExplorer"}),Object(n.jsx)("button",{onClick:function(){e.isFormPopupOpen?(u(!1),t(!1),s(!1)):u(!i)},className:"header__icon ".concat(i?"header__icon_active":""," ").concat(e.isFormPopupOpen||e.isPopupOpen?"header__icon_active":""," ").concat(f("header__icon_dark"))}),Object(n.jsxs)("div",{className:"header__mobile-nav ".concat(i?"header__mobile-nav_visible":""),children:[Object(n.jsx)(g,{isLoggedIn:e.isLoggedIn,isSavedNewsRoute:e.isSavedNewsRoute,isNavOpen:i,navigationLinkColors:f}),e.isLoggedIn?Object(n.jsx)("button",{onClick:function(){b.signout().then((function(){e.toggleLoggedIn(!1),u(!1),localStorage.removeItem("articles")})).catch((function(e){console.log(e)}))},className:"header__signout ".concat(f("header__signout_dark")),children:"".concat(i?"Sign out":h.name)}):Object(n.jsx)("button",{onClick:m,className:"header__signin ".concat(f("header__signin_dark")),children:"Sign in"})]})]})})},f=s.p+"static/media/footer__nav-icon_facebook.ce8865e2.svg",_=s.p+"static/media/footer__nav-icon_github.94b724e8.svg",O=function(){return Object(n.jsx)("footer",{className:"footer",children:Object(n.jsxs)("div",{className:"footer__width",children:[Object(n.jsx)("p",{className:"footer__copyright",children:"\xa9 Danny Demosi, Powered by News API"}),Object(n.jsxs)("nav",{className:"footer__navbar",children:[Object(n.jsxs)("div",{className:"footer__navlink-container",children:[Object(n.jsx)(u.b,{to:"/",className:"footer__navlink",children:"Home"}),Object(n.jsx)("a",{href:"https://practicum.yandex.com/",className:"footer__navlink",children:"Practicum by Yandex"})]}),Object(n.jsxs)("div",{className:"footer__nav-icon-container",children:[Object(n.jsx)("a",{href:"https://github.com/ddemosi/news-explorer-frontend",target:"_blank",rel:"noopener noreferrer",className:"footer__nav-icon footer__nav-icon_github",children:Object(n.jsx)("img",{alt:"Github logo",src:_})}),Object(n.jsx)("a",{href:"https://www.facebook.com/YPracticum/",target:"_blank",rel:"noopener noreferrer",className:"footer__nav-icon footer__nav-icon_facebook",children:Object(n.jsx)("img",{alt:"Facebook logo",src:f})})]})]})]})})},v=s(12),x=s.n(v),w=s(18),N="0faa4eab3d374a6d99b353e5310a09b0",k={url:"https://nomoreparties.co/news/v2",endpoint:"/everything",auth:{Authorization:N},pageSize:100,apiKey:N},S=new(function(){function e(t){var s=t.url,n=t.endpoint,r=t.auth,a=t.pageSize,c=t.apiKey;Object(h.a)(this,e),this._url=s,this._endpoint=n,this._auth=r,this._pageSize=a,this._apiKey=c}return Object(j.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"search",value:function(e){var t=this;return fetch("".concat(this._url).concat(this._endpoint,"?q=").concat(e,"&from=").concat(new Date(Date.now()-6048e5),"&to=").concat(new Date(Date.now()),"&pageSize=").concat(100,"&apiKey=").concat(N),{headers:this._auth}).then((function(e){return t._checkResponse(e)}))}}]),e}())(k),y=function(e){var t=Object(r.useRef)();function s(s){S.search(t.current.value).then((function(e){var n=[],r=[];if(0===s.length)return e.articles.forEach((function(e){e.keyword=t.current.value,n.push(e)})),n;if(!s)throw new Error("Saved articles retrieval failed");return s.forEach((function(e){r.push(e.url)})),e.articles.forEach((function(e){r.includes(e.url)&&(e.isSaved=!0),e.keyword=t.current.value,n.push(e)})),n})).then((function(t){if(t)return e.setVisibleCards(3),void e.setCards(t);throw e.toggleIsLoading(!1),new Error("Unhandled request error")})).then((function(){e.toggleIsLoading(!1)})).catch((function(e){console.log(e)}))}function a(n){if(n.preventDefault(),t.current.value.length>0){if(e.toggleIsLoading(!0),!e.isLoggedIn)return void S.search(t.current.value).then((function(e){var s=[];return e.articles.forEach((function(e){e.keyword=t.current.value,s.push(e)})),s})).then((function(t){if(t)return e.setVisibleCards(3),void e.setCards(t);throw e.toggleIsLoading(!1),new Error("Unhandled request error")})).then((function(){e.toggleIsLoading(!1)})).catch((function(e){console.log(e)}));localStorage.getItem("articles")?s(JSON.parse(localStorage.getItem("articles"))):b.getArticles().then((function(e){s(e)})).catch((function(e){console.log(e)}))}}return Object(n.jsx)("section",{className:"search-container",children:Object(n.jsxs)("div",{className:"search-container__width",children:[Object(n.jsx)("h2",{className:"search-container__title",children:"What's going on in the world?"}),Object(n.jsx)("p",{className:"search-container__subtitle",children:"Find the latest news on any topic and save them in your personal account"}),Object(n.jsxs)("form",{onSubmit:a,className:"search-bar",children:[Object(n.jsx)("input",{ref:t,onKeyUp:function(e){e.preventDefault(),"Enter"===e.key&&a(e)},type:"text",placeholder:"Enter topic",className:"search-bar__input"}),Object(n.jsx)("button",{type:"submit",className:"search-bar__button",children:"Search"})]})]})})},P=function(){return Object(n.jsx)("section",{className:"about",children:Object(n.jsxs)("div",{className:"about__width",children:[Object(n.jsx)("div",{className:"about__image"}),Object(n.jsxs)("div",{className:"about__text-container",children:[Object(n.jsx)("h2",{className:"about__title",children:"About the author"}),Object(n.jsx)("p",{className:"about__text",children:"Danny is an electronic music producer, mix engineer, and web developer from Salt Lake City, Utah. While his first love is making dance music, Danny loves to program web apps, especially using front end frameworks like Vue 3 and ReactJS."}),Object(n.jsx)("p",{className:"about__text",children:"Danny is currently pursuing a career in tech working part-time for Adobe Systems as a security contractor. He's also building his own company with his brother, Matt, that builds web apps that assists people that are trying to pursue full-time careers as freelancers."})]})]})})},I=function(e){var t=Object(r.useState)(!1),s=Object(l.a)(t,2),a=s[0],c=s[1];function o(){e.deleteCard(e._id)}function i(){return u.apply(this,arguments)}function u(){return(u=Object(w.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.saveArticle({keyword:e.keyword,title:e.title,text:e.description,date:e.date,source:e.source,link:e.url,image:e.image});case 6:if(!t.sent){t.next=11;break}return c(!0),t.abrupt("return");case 11:return c(!1),t.abrupt("return");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){e.isSaved&&c(!0)}),[e.isSaved,c]),Object(n.jsxs)("li",{className:"news-card",children:[e.isSavedNewsRoute&&e.isLoggedIn?Object(n.jsx)("button",{onClick:o,className:"news-card__delete-button",children:Object(n.jsx)("span",{className:"news-card__save-button-label",children:Object(n.jsx)("p",{children:"Remove from saved"})})}):!e.isSavedNewsRoute&&e.isLoggedIn?Object(n.jsx)("button",{onClick:function(e){e.stopPropagation(),i()},className:"news-card__save-button ".concat(a?"news-card__save-button_active":"")}):Object(n.jsx)("button",{onClick:function(e){e.stopPropagation(),i()},className:"news-card__save-button",children:Object(n.jsx)("span",{className:"news-card__save-button-label",children:Object(n.jsx)("p",{children:"Sign in to save articles"})})}),Object(n.jsxs)("a",{className:"news-card__anchor",href:e.url,target:"_blank",rel:"noopener noreferrer",children:[function(){if(e.isSavedNewsRoute)return Object(n.jsx)("div",{className:"news-card__keyword",children:Object(n.jsx)("p",{children:(t=e.keyword,"string"!==typeof t?"":t.charAt(0).toUpperCase()+t.slice(1))})});var t}(),Object(n.jsx)("div",{className:"news-card__image",style:{backgroundImage:"url(".concat(e.image,")")}}),Object(n.jsxs)("div",{className:"news-card__info-container",children:[Object(n.jsx)("p",{className:"news-card__date",children:e.isSavedNewsRoute?e.date.substr(0,15):e.date.split("T")[0]}),Object(n.jsx)("h3",{className:"news-card__title",children:e.title}),Object(n.jsx)("p",{className:"news-card__snippet",children:e.description}),Object(n.jsx)("p",{className:"news-card__source",children:e.source})]})]})]})},C=function(e){var t=e.error;return Object(n.jsx)("div",{className:"nothing-found__container",children:Object(n.jsx)("h2",{className:"nothing-found__title",children:t?"Sorry, something went wrong during the request. There may be a connection issue or the server may be down. Please try again later":"Nothing Found"})})},R=function(e){var t=Object(r.useState)(!1),s=Object(l.a)(t,2),a=s[0],c=s[1];return Object(n.jsx)("section",{className:"news-card-list",children:Object(n.jsxs)("div",{className:"news-card-list__width",children:[e.isSavedNewsRoute?"":Object(n.jsx)("h2",{className:"news-card-list__title",children:"Search results"}),Object(n.jsx)("ul",{className:"news-card-list__container",children:0===e.cards.length?Object(n.jsx)(C,{error:!1}):e.cards?e.cards.slice(0,e.visibleCards).map((function(t){return Object(n.jsx)(I,{_id:t._id,keyword:t.keyword,date:t.publishedAt,title:t.title,description:t.description,source:t.source.name,url:t.url,image:t.urlToImage,isSaved:t.isSaved,isSavedNewsRoute:e.isSavedNewsRoute,isLoggedIn:e.isLoggedIn,deleteCard:e.deleteCard,saveArticle:e.saveArticle},t.url)})):Object(n.jsx)(C,{error:!0})}),e.isSavedNewsRoute||a?"":Object(n.jsx)("button",{onClick:function(){if(e.visibleCards>100)c(!0);else{var t=e.visibleCards+3;e.setVisibleCards(t)}},className:"news-card-list__show-more",children:"Show more"})]})})},L=function(){return Object(n.jsx)("div",{className:"circle-preloader__container",children:Object(n.jsx)("i",{className:"circle-preloader"})})},F=function(e){var t=e.isLoggedIn,s=e.isLoading,a=e.toggleIsLoading,c=e.togglePopup,o=e.toggleFormPopup,i=Object(r.useState)([]),u=Object(l.a)(i,2),d=u[0],p=u[1],h=Object(r.useState)(0),j=Object(l.a)(h,2),g=j[0],m=j[1];function f(e){return _.apply(this,arguments)}function _(){return(_=Object(w.a)(x.a.mark((function t(s){var n,r,a,i,l,u,d;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.keyword,r=s.title,a=s.text,i=s.date,l=s.source,u=s.link,d=s.image,e.isLoggedIn){t.next=5;break}return c(!0),o(!0),t.abrupt("return",!1);case 5:return t.next=7,b.addArticle({keyword:n,title:r,text:a,date:i,source:l,link:u,image:d}).then((function(e){return!!e&&(localStorage.removeItem("articles"),!0)})).catch((function(e){console.log(e)}));case 7:if(!t.sent){t.next=11;break}return t.abrupt("return",!0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.jsxs)("div",{className:"main",children:[Object(n.jsx)(y,{setCards:p,setVisibleCards:m,toggleIsLoading:a,isLoggedIn:t}),function(){if(s)return Object(n.jsx)(L,{});if(!s&&g>0){if(!d)return Object(n.jsx)(C,{error:!0});if(0===d.length)return Object(n.jsx)(C,{error:!1});if(d)return Object(n.jsx)(R,{isSavedNewsRoute:!1,isLoggedIn:t,cards:d,setCards:p,visibleCards:g,setVisibleCards:m,saveArticle:f})}}(),Object(n.jsx)(P,{})]})},E=s(45),A=s(20),D=function(e){var t=e.savedCards,s=e.sortedKeywords,a=Object(r.useContext)(p),c=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)};return Object(n.jsx)("section",{className:"saved-news-header",children:Object(n.jsxs)("div",{className:"saved-news-header__width",children:[Object(n.jsx)("p",{className:"saved-news-header__label",children:"Saved articles"}),Object(n.jsxs)("h2",{className:"saved-news-header__title",children:[a.name,", you have ",t?t.length:"no"," saved articles"]}),s?Object(n.jsxs)("p",{className:"saved-news-header__keyword-text",children:["By keywords: ",Object(n.jsx)("span",{className:"saved-news-header__keywords",children:1===s.length?"".concat(c(s[0])):2===s.length?"".concat(c(s[0])," and ").concat(c(s[1])):3===s.length?"".concat(c(s[0]),", ").concat(c(s[1]),", and ").concat(c(s[2])):"".concat(c(s[0]),", ").concat(c(s[1]),", and ").concat(s.length-2," others")})]}):""]})})},U=function(e){var t=e.isLoading,s=e.toggleIsLoading,a=e.isLoggedIn,c=Object(r.useState)(),o=Object(l.a)(c,2),i=o[0],u=o[1],d=Object(r.useState)([]),p=Object(l.a)(d,2),h=p[0],j=p[1];function g(e){e&&b.deleteArticle(e).then((function(){localStorage.removeItem("articles"),f()})).catch((function(e){console.log(e)}))}var m=function(e){if(e){var t=function(){var t=[];e.forEach((function(e){var s=e.keyword.toLowerCase();t.push(s)}));for(var s={},n=0;n<t.length;++n)s[t[n]]||(s[t[n]]=0),++s[t[n]];for(var r=Object(A.a)({},s),a=[],c=0;c<Object.keys(s).length;++c){var o=Object.keys(r).reduce((function(e,t){return r[e]>r[t]?e:t}));a.push(o),delete r[o]}return{v:a}}();return"object"===typeof t?t.v:void 0}};var f=Object(r.useCallback)((function(){s(!0);var e=JSON.parse(localStorage.getItem("articles"));if(e){var t=m(e);j(t),u(e),s(!1)}else b.getArticles().then((function(e){var t=[];return e.forEach((function(e){var s={_id:e._id,keyword:e.keyword,publishedAt:e.date,title:e.title,description:e.text,source:e.source,url:e.link,urlToImage:e.image};t.push(s)})),t})).then((function(e){var t=m(e);return j(t),function(e,t){var s,n={},r=Object(E.a)(e.entries());try{for(r.s();!(s=r.n()).done;){var a=Object(l.a)(s.value,2),c=a[0],o=a[1];n[o]=c}}catch(i){r.e(i)}finally{r.f()}return t.sort((function(e,t){return n[e.keyword]-n[t.keyword]})),t}(t,e)})).then((function(e){localStorage.setItem("articles",JSON.stringify(e)),u(e),s(!1)})).catch((function(e){console.log(e)}))}),[s,u,j]);return Object(r.useEffect)((function(){f()}),[f]),Object(n.jsxs)("section",{className:"saved-news",children:[Object(n.jsx)(D,{savedCards:i,sortedKeywords:h}),function(){if(!i)return Object(n.jsx)(C,{error:!0});if(t)return Object(n.jsx)(L,{});if(!t){if(0===i.length)return Object(n.jsx)(C,{error:!1});if(i)return Object(n.jsx)(R,{isSavedNewsRoute:!0,isLoggedIn:a,cards:i,setCards:u,visibleCards:i.length,setVisibleCards:null,deleteCard:g,sortedKeywords:h})}}()]})},T=s(28),q=s.n(T),J=function(e){var t=Object(r.useState)({}),s=Object(l.a)(t,2),a=s[0],c=s[1],o=Object(r.useState)(!1),i=Object(l.a)(o,2),u=i[0],d=i[1],p=Object(r.useState)(!1),h=Object(l.a)(p,2),j=h[0],g=h[1],m=Object(r.useRef)(),f=Object(r.useRef)(),_=Object(r.useRef)();function O(t){t.preventDefault(),b.register(m.current.value,f.current.value,_.current.value).then((function(t){t?(e.toggleRegisterSuccess(!0),e.toggleFormPopup(!1),e.toggleRegisterSuccessPopup(!0)):(e.toggleRegisterSuccess(!1),e.toggleFormPopup(!1),e.toggleRegisterSuccessPopup(!0))})).catch((function(t){e.toggleRegisterSuccess(!1),e.toggleFormPopup(!1),e.toggleRegisterSuccessPopup(!0),console.log(t)}))}function v(t){t.preventDefault(),b.signin(m.current.value,f.current.value).then((function(t){t?b.getUserInfo().then((function(t){e.setCurrentUser(t)})).then((function(){m.current.value="",f.current.value="",d(!1),e.toggleFormPopup(!1),e.toggleLoggedIn(!0),e.togglePopup(!1)})):(d(!0),g(!0))})).catch((function(e){"Error: 400"===e?(d(!0),g(!0)):(d(!0),console.log(e))}))}function x(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={};return e&&q.a.isEmail(e)||(n.email="Invalid email address"),t?q.a.isStrongPassword(t,{minSymbols:0})||(n.password="Password must be at least 8 characters and contain a number and a capital letter."):n.password="Password is a required field",null===s||(s?s.length<5&&(n.username="Username must be at least 6 characters"):n.username="Username is a required field."),n}function w(){var e=x(m.current.value,f.current.value);0!==Object.keys(e).length?c(e):c(!1)}function N(){g(!1),e.toggleIsRegisterPopup(!e.isRegisterPopup)}return Object(n.jsx)(n.Fragment,{children:e.isFormPopupOpen?e.isRegisterPopup?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"popup__title",children:"Sign up"}),Object(n.jsxs)("form",{onChange:function(){return function(){var e=x(m.current.value,f.current.value,_.current.value);0!==Object.keys(e).length?c(e):c(!1)}()},onSubmit:O,className:"popup__form popup__form_register form",children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"register-email",children:"Email"}),Object(n.jsx)("input",{className:"form__input",type:"email",id:"register-email",ref:m,placeholder:"Email",required:!0}),a.email?Object(n.jsx)("span",{className:"form__error",children:a.email}):"",Object(n.jsx)("label",{className:"form__label",htmlFor:"register-password",children:"Password"}),Object(n.jsx)("input",{className:"form__input",type:"password",id:"register-password",ref:f,placeholder:"Password",required:!0}),a.password?Object(n.jsx)("span",{className:"form__error",children:a.password}):"",Object(n.jsx)("label",{className:"form__label",htmlFor:"register-username",children:"Username"}),Object(n.jsx)("input",{className:"form__input",type:"text",id:"register-username",ref:_,placeholder:"Username",required:!0}),a.username?Object(n.jsx)("span",{className:"form__error",children:a.username}):"",Object(n.jsx)("button",{type:"submit",className:"popup__submit ".concat(a?"":"popup__submit_active"),children:e.isRegisterPopup?"Sign up":"Sign in"})]}),Object(n.jsxs)("p",{className:"popup__swap-form-text",children:["or ",Object(n.jsx)("button",{onClick:N,className:"popup__swap-form-button",children:"Sign in"})]})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"popup__title",children:"Sign in"}),Object(n.jsxs)("form",{onChange:w,onSubmit:v,className:"popup__form popup__form_signin form",children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"register-email",children:"Email"}),Object(n.jsx)("input",{className:"form__input",type:"email",id:"register-email",ref:m,placeholder:"Email",required:!0}),a.email?Object(n.jsx)("span",{className:"form__error",children:a.email}):"",Object(n.jsx)("label",{className:"form__label",htmlFor:"register-password",children:"Password"}),Object(n.jsx)("input",{className:"form__input",type:"password",id:"register-password",ref:f,placeholder:"Password",required:!0}),a.password?Object(n.jsx)("span",{className:"form__error",children:a.password}):"",u?Object(n.jsx)("span",{className:"form__error",children:j?"Invalid email or password":"Something went wrong, please try again"}):"",Object(n.jsx)("button",{type:"submit",className:"popup__submit ".concat(a?"":"popup__submit_active"),children:e.isRegisterPopup?"Sign up":"Sign in"})]}),Object(n.jsxs)("p",{className:"popup__swap-form-text",children:["or ",Object(n.jsx)("button",{onClick:N,className:"popup__swap-form-button",children:"Sign up"})]})]}):""})},K=function(e){return Object(n.jsx)("section",{className:"modal ".concat(e.isPopupOpen?"modal_visible":""),children:Object(n.jsx)("div",{className:"popup ".concat(e.isPopupOpen?"popup_visible":""),children:Object(n.jsxs)("div",{className:"form-width",children:[Object(n.jsx)("i",{className:"popup__exit",onClick:function(){e.togglePopup(!1),e.toggleFormPopup(!1)}}),e.children]})})})},V=s(46),z=function(e){var t=e.component,s=Object(V.a)(e,["component"]);return Object(n.jsx)(d.b,{children:function(){return s.isLoggedIn?Object(n.jsx)(t,Object(A.a)({},s)):Object(n.jsx)(d.a,{to:{pathname:"/",state:{redirected:!0}}})}})},B=function(){var e=Object(r.useState)({}),t=Object(l.a)(e,2),s=t[0],a=t[1],c=Object(r.useState)(null),o=Object(l.a)(c,2),i=o[0],h=o[1],j=Object(r.useState)(!1),g=Object(l.a)(j,2),f=g[0],_=g[1],v=Object(r.useState)(!1),x=Object(l.a)(v,2),w=x[0],N=x[1],k=Object(r.useState)(!1),S=Object(l.a)(k,2),y=S[0],P=S[1],I=Object(r.useState)(!1),R=Object(l.a)(I,2),E=R[0],A=R[1],D=Object(r.useState)(!1),T=Object(l.a)(D,2),q=T[0],V=T[1],B=Object(r.useState)(!1),H=Object(l.a)(B,2),M=H[0],W=H[1],Y=Object(r.useState)(null),G=Object(l.a)(Y,2),Q=G[0],X=G[1];function Z(){_(!1),A(!1),P(!0)}function $(){_(!0),A(!1),P(!0)}return Object(r.useEffect)((function(){b.getUserInfo().then((function(e){if(e)return a(e),h(!0),void X(!1)})).catch((function(e){if("Error: 401"!==e)return X(!0),void console.log(e);h(!1),X(!1)}))}),[]),null===i&&null===Q?Object(n.jsx)(L,{}):Q?Object(n.jsx)(C,{error:!0}):Object(n.jsx)(p.Provider,{value:s,children:Object(n.jsx)("div",{className:"app",children:Object(n.jsxs)("div",{className:"page",children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)(d.d,{children:[Object(n.jsxs)(d.b,{exact:!0,path:"/",children:[Object(n.jsx)(m,{isLoggedIn:i,toggleLoggedIn:h,isPopupOpen:w,isFormPopupOpen:y,toggleIsRegisterPopup:_,togglePopup:N,toggleFormPopup:P,isSavedNewsRoute:!1}),Object(n.jsx)(F,{isLoggedIn:i,isLoading:M,toggleIsLoading:W,isPopupOpen:w,isFormPopupOpen:y,togglePopup:N,toggleFormPopup:P}),Object(n.jsx)(O,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/saved-news",children:[Object(n.jsx)(m,{isLoggedIn:i,isSavedNewsRoute:!0,isPopupOpen:w,isFormPopupOpen:y,toggleIsRegisterPopup:_,toggleFormPopup:P,togglePopup:N,toggleLoggedIn:h}),Object(n.jsx)(z,{component:U,isLoggedIn:i,isLoading:M,toggleIsLoading:W,toggleFormPopup:P,togglePopup:N}),Object(n.jsx)(O,{})]}),Object(n.jsx)(d.a,{from:"*",to:"/"})]})}),y?Object(n.jsx)(K,{togglePopup:N,toggleFormPopup:P,isPopupOpen:w,children:Object(n.jsx)(J,{isRegisterPopup:f,toggleIsRegisterPopup:_,isFormPopupOpen:y,toggleFormPopup:P,isRegisterSuccessPopupOpen:E,toggleRegisterSuccessPopup:A,togglePopup:N,toggleLoggedIn:h,isRegisterSuccess:q,toggleRegisterSuccess:V,setCurrentUser:a})}):"",E?Object(n.jsx)(K,{isPopupOpen:w,togglePopup:N,toggleFormPopup:P,children:q?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"popup__title",children:"Registration completed successfully!"}),Object(n.jsx)("button",{className:"popup__swap-form-text popup__swap-form-button",onClick:Z,children:"Sign in"})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"popup__title",children:"Oops! Something went wrong"}),Object(n.jsx)("button",{className:"popup__swap-form-text popup__swap-form-button",onClick:$,children:"Try again"})]})}):""]})})})};o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.getElementById("root")),i()},52:function(e,t,s){}},[[137,1,2]]]);
//# sourceMappingURL=main.57dcd650.chunk.js.map