{"version":3,"sources":["reportWebVitals.js","contexts/CurrentUserContext.js","components/Navigation/Navigation.js","components/Header/Header.js","utils/useComponentWillMount.js","images/footer__nav-icon_facebook.svg","images/footer__nav-icon_github.svg","components/Footer/Footer.js","utils/constants.js","components/SearchForm/SearchForm.js","components/About/About.js","components/NewsCard/NewsCard.js","components/NothingFound/NothingFound.js","components/NewsCardList/NewsCardList.js","components/Preloader/Preloader.js","components/Main/Main.js","components/SavedNewsHeader/SavedNewsHeader.js","components/SavedNews/SavedNews.js","components/PopupWithForm/PopupWithForm.js","components/Popup/Popup.js","utils/MainApi.js","components/ProtectedRoute/ProtectedRoute.js","utils/NewsApi.js","components/App/App.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","CurrentUserContext","React","createContext","Navigation","props","className","isNavOpen","to","exact","activeClassName","navigationLinkColors","isLoggedIn","Header","togglePopup","toggleFormPopup","signoutHandler","handlePopup","toggleNav","currentUser","useContext","history","useHistory","activeClass","isSavedNewsRoute","func","willMount","useRef","current","useComponentWillMount","location","state","useEffect","undefined","redirected","onClick","isFormPopupOpen","isPopupOpen","toggleLoggedIn","localStorage","removeItem","catch","err","console","log","name","Footer","href","target","rel","alt","src","github","facebook","apiKey","newsApiInfo","url","endpoint","pageSize","auth","Authorization","searchRange","SearchForm","setCards","setVisibleCards","toggleIsLoading","getUserArticles","searchHandler","searchRef","useState","disableInputs","toggleInputDisable","searchAndSort","savedCards","value","res","newArticles","urlArray","Error","length","articles","forEach","article","keyword","push","card","includes","isSaved","_id","newsSearch","setItem","getItem","JSON","parse","newCards","newCard","publishedAt","date","title","description","text","source","link","urlToImage","image","stringify","searchEventHandler","e","preventDefault","recentSearch","onSubmit","ref","onKeyUp","key","type","placeholder","disabled","About","NewsCard","deleteArticleHandler","saveArticle","isSavedIcon","toggleIsSavedIcon","cardId","setCardId","handleDelete","a","handleArticleSave","savedArticleId","stopPropagation","s","charAt","toUpperCase","slice","keywords","style","backgroundImage","substr","split","NothingFound","error","NewsCardList","hideButton","toggleButton","cards","visibleCards","map","newVisibleCards","Preloader","Main","isLoading","addArticleHandler","renderCardList","SavedNewsHeader","sortedKeywords","capitalize","SavedNews","setSavedCards","setSortedKeywords","deleteCard","id","retrieveCards","returnKeywordRankings","arr","lowercase","toLowerCase","result","i","keywordsCopy","sortedResult","Object","keys","reducedObj","reduce","b","useCallback","keywordRankArray","refArray","objectToSort","itemPositions","entries","index","sort","sortCardsByKeyword","sortedCards","PopupWithForm","isRegisterPopup","toggleIsRegisterPopup","toggleRegisterSuccessPopup","toggleRegisterSuccess","setCurrentUser","registerHandler","signinHandler","getUserInfo","errors","setErrors","signinFailed","toggleSigninFailed","badRequest","toggleBadRequest","emailRef","passwordRef","nameRef","handleRegisterSubmit","handleSigninSubmit","token","isEmail","email","test","isStrongPassword","password","validateInputs","username","signinFormOnChange","validatedInputs","toggleRegisterPopup","onChange","registerFormOnChange","htmlFor","required","Popup","children","api","headers","credentialPreference","this","_url","_headers","_credential","ok","json","Promise","reject","status","fetch","method","credentials","body","_checkResponse","articleId","ProtectedRoute","Component","component","pathname","newsApi","_endpoint","_auth","_pageSize","_apiKey","dateObj","Date","setDate","getDate","month","getUTCMonth","day","getUTCDate","getUTCFullYear","_getFromDate","_getToDate","App","isRegisterSuccessPopupOpen","isRegisterSuccess","serverError","toggleServerError","registrationSuccessToSignin","registrationFailRedirect","returnedUserInfo","register","signin","clear","signout","getArticles","deleteArticle","addArticle","search","Provider","path","from","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.24372c25.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst Navigation = (props) => {\n\n  function renderSavedArticlesLink() {\n    if (props.isLoggedIn) {\n      return (\n        <NavLink to='/saved-news' exact={true} activeClassName=\"navbar__link_active_dark\" className={`navbar__link ${props.navigationLinkColors('navbar__link_dark')}`}>Saved articles</NavLink>\n      )\n    } else {\n      return\n    }\n  }\n\n  return (\n    <div className={`navbar ${props.isNavOpen ? 'navbar_active' : ''}`}>\n      <NavLink to='/' exact={true} activeClassName=\"navbar__link_active\" className={`navbar__link ${props.navigationLinkColors('navbar__link_dark')}`}>Home</NavLink>\n      {renderSavedArticlesLink()}\n    </div>\n  );\n}\n\nexport default Navigation;","import React, { useContext, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport { useComponentWillMount } from '../../utils/useComponentWillMount';\r\n\r\nimport Navigation from '../Navigation/Navigation';\r\n\r\nconst Header = (props) => {\r\n\r\n  // state and context declarations\r\n\r\n  const { togglePopup, toggleFormPopup, signoutHandler, handlePopup, toggleNav, isNavOpen } = props;\r\n\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const history = useHistory();\r\n\r\n  // const location = useLocation();\r\n\r\n  // handlers\r\n\r\n  function handleSignout() {\r\n\r\n    signoutHandler()\r\n      .then(() => {\r\n        props.toggleLoggedIn(false);\r\n        toggleNav(false);\r\n        localStorage.removeItem('articles');\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('recent-search-keyword');\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n\r\n  }\r\n\r\n  function toggleNavStatus() {\r\n    if (props.isFormPopupOpen) {\r\n      toggleNav(false);\r\n      togglePopup(false);\r\n      toggleFormPopup(false);\r\n    } else {\r\n      toggleNav(!isNavOpen);\r\n    }\r\n  }\r\n\r\n  function navigationLinkColors(activeClass) {\r\n    if (props.isSavedNewsRoute && !isNavOpen) {\r\n      return activeClass;\r\n    } else if (props.isSavedNewsRoute && isNavOpen) {\r\n      return '';\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n\r\n  // custom hook to remove popup trigger on refresh\r\n  useComponentWillMount(() => {\r\n    history.location.state = null;\r\n    return\r\n  })\r\n\r\n  // effect to handle redirect from /saved-news if not logged in\r\n  useEffect(() => {\r\n    if (history.location.state === null || history.location.state === undefined) {\r\n      return\r\n    } else if (history.location.state.redirected){\r\n      handlePopup();\r\n      return\r\n    }\r\n    return\r\n  }, [history.location.state, handlePopup]);\r\n\r\n  return (\r\n    <header className={`header ${isNavOpen ? 'header_nav-active' : ''}`}>\r\n      <div className='header__size'>\r\n        <p className={`header__logo ${navigationLinkColors('header__logo_dark')} `}>NewsExplorer</p>\r\n\r\n        <button onClick={toggleNavStatus} className={`header__icon ${isNavOpen ? 'header__icon_active' : ''} ${props.isFormPopupOpen || props.isPopupOpen ? 'header__icon_active' : ''} ${navigationLinkColors('header__icon_dark')}`}></button>\r\n        <div className={`header__mobile-nav ${isNavOpen ? 'header__mobile-nav_visible' : ''}`}>\r\n          <Navigation\r\n            isLoggedIn={props.isLoggedIn}\r\n            isSavedNewsRoute={props.isSavedNewsRoute}\r\n            isNavOpen={isNavOpen}\r\n            navigationLinkColors={navigationLinkColors}\r\n          />\r\n\r\n          {props.isLoggedIn\r\n            ? <button\r\n              onClick={handleSignout}\r\n              className={`header__signout ${navigationLinkColors('header__signout_dark')}`}>{`${isNavOpen ? 'Sign out' : currentUser.name}`}</button>\r\n            : <button\r\n              onClick={handlePopup}\r\n              className={`header__signin ${navigationLinkColors('header__signin_dark')}`}>Sign in</button>}\r\n        </div>\r\n\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import { useRef } from 'react';\r\n\r\n\r\nexport const useComponentWillMount = (func) => {\r\n  const willMount = useRef(true)\r\n\r\n  if (willMount.current) func()\r\n\r\n  willMount.current = false\r\n}\r\n","export default __webpack_public_path__ + \"static/media/footer__nav-icon_facebook.ce8865e2.svg\";","export default __webpack_public_path__ + \"static/media/footer__nav-icon_github.94b724e8.svg\";","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport facebook from '../../images/footer__nav-icon_facebook.svg';\nimport github from '../../images/footer__nav-icon_github.svg';\n\nconst Footer = () => {\n  return (\n    <footer className=\"footer\">\n      <div className=\"footer__width\">\n        <p className=\"footer__copyright\">&copy; Danny Gummow, Powered by News API</p>\n        <nav className=\"footer__navbar\">\n          <div className=\"footer__navlink-container\">\n            <Link to='/' className=\"footer__navlink\">Home</Link>\n            <a href=\"https://practicum.yandex.com/\" className=\"footer__navlink\">Practicum by Yandex</a>\n          </div>\n          <div className=\"footer__nav-icon-container\">\n            <a href=\"https://github.com/ddemosi/news-explorer-frontend\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"footer__nav-icon footer__nav-icon_github\"><img alt=\"Github logo\" src={github}></img></a>\n            <a href=\"https://www.facebook.com/YPracticum/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"footer__nav-icon footer__nav-icon_facebook\"><img alt=\"Facebook logo\" src={facebook}></img></a>\n          </div>\n        </nav>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;","const incrementVisibleCardsVariable = 3;\r\nconst maxVisibleCards = 100;\r\n\r\nconst apiKey = \"6a763a6b37bf49cf9315c6b0dc70547a\"\r\n\r\nconst newsApiInfo = {\r\n  apiKey,\r\n  url: \"https://nomoreparties.co/news/v2\",\r\n  endpoint: \"/everything\",\r\n  pageSize: 100,\r\n  auth: {\r\n    Authorization: apiKey,\r\n  },\r\n  searchRange: 7,\r\n}\r\n\r\nconst main = {\r\n  url: 'https://api.danny-news-explorer.students.nomoreparties.site',\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n  credentialPreference: 'include',\r\n}\r\n\r\nexport {\r\n  incrementVisibleCardsVariable,\r\n  maxVisibleCards,\r\n  newsApiInfo,\r\n  main,\r\n}","import React, { useEffect, useRef, useState } from 'react';\r\n\r\nimport { incrementVisibleCardsVariable } from '../../utils/constants';\r\n\r\nconst SearchForm = ({ setCards, setVisibleCards, toggleIsLoading, isLoggedIn, getUserArticles, searchHandler }) => {\r\n\r\n  const searchRef = useRef();\r\n\r\n  // disable inputs state\r\n  const [disableInputs, toggleInputDisable] = useState(false);\r\n\r\n  // check if any of the cards match cards that are already saved\r\n\r\n  function searchAndSort(savedCards) {\r\n    searchHandler(searchRef.current.value)\r\n      .then((res) => {\r\n        // array of articles to be compared then returned after loop\r\n        let newArticles = []\r\n        let urlArray = [];\r\n        // check if there are no saved cards or an error\r\n        if (!savedCards) {\r\n          // check for card retrieval error\r\n          throw new Error('Saved articles retrieval failed');\r\n        } else if (savedCards.length === 0 || null) {\r\n          // if there are no local card, loop articles and assign keyword. Then return\r\n          res.articles.forEach((article) => {\r\n            article.keyword = searchRef.current.value;\r\n            newArticles.push(article);\r\n          });\r\n\r\n          return newArticles;\r\n\r\n        } else {\r\n          // loop through saved cards and extract the url\r\n          savedCards.forEach((card) => {\r\n            urlArray.push(card.url);\r\n          });\r\n          // loop through articles, compare, then assign a special property if the article\r\n          // has already been saved\r\n          res.articles.forEach((article) => {\r\n            if (urlArray.includes(article.url)) {\r\n              article.isSaved = true;\r\n\r\n              // loop through saved cards and find matching url object, then copy it's id to the rendered card\r\n              savedCards.forEach((card) => {\r\n                if (card.url === article.url) {\r\n                  article._id = card._id;\r\n                }\r\n                return\r\n              })\r\n            };\r\n            // then assign keyword\r\n            article.keyword = searchRef.current.value;\r\n            newArticles.push(article);\r\n            return\r\n          })\r\n        }\r\n        // finally, return the articles with the new properties\r\n        return newArticles;\r\n      })\r\n      .then((articles) => {\r\n        if (articles) {\r\n          setVisibleCards(incrementVisibleCardsVariable);\r\n          setCards(articles);\r\n          return\r\n        } else {\r\n          toggleIsLoading(false);\r\n          disableInputs(false);\r\n          throw new Error('Unhandled request error')\r\n        }\r\n      })\r\n      .then(() => {\r\n        // clear loading icon\r\n        toggleIsLoading(false);\r\n        toggleInputDisable(false);\r\n      })\r\n      .catch((err) => {\r\n        toggleInputDisable(false);\r\n        console.log(err);\r\n      })\r\n  }\r\n\r\n  // Search click handler\r\n\r\n  function newsSearch() {\r\n    // disable input to prevent unwanted requests\r\n    toggleInputDisable(true);\r\n    localStorage.setItem('recent-search-keyword', searchRef.current.value);\r\n    if (searchRef.current.value.length > 0) {\r\n      // set loading icon\r\n      toggleIsLoading(true);\r\n\r\n      // if user is not logged in, ignore sorting function, but still assign keywords\r\n      if (!isLoggedIn) {\r\n\r\n        searchHandler(searchRef.current.value)\r\n          .then((res) => {\r\n            // loop through articles and assign keyword\r\n            let newArticles = [];\r\n            res.articles.forEach((article) => {\r\n              article.keyword = searchRef.current.value;\r\n              newArticles.push(article);\r\n            });\r\n            return newArticles;\r\n          })\r\n          .then((articles) => {\r\n            if (articles) {\r\n              setVisibleCards(incrementVisibleCardsVariable);\r\n              setCards(articles);\r\n              return\r\n            } else {\r\n              toggleIsLoading(false);\r\n              throw new Error('Unhandled request error')\r\n            }\r\n          })\r\n          .then(() => {\r\n            toggleInputDisable(false);\r\n            toggleIsLoading(false);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          })\r\n        return\r\n      }\r\n\r\n      // if user is logged in, assign keyword and sort cards\r\n\r\n      // elevated scope to avoid crashing when data isn't returned fast enough\r\n      let savedCards\r\n\r\n      // retrieve cards from local storage or api. Save to savedCards variable\r\n      if (localStorage.getItem('articles')) {\r\n        savedCards = JSON.parse(localStorage.getItem('articles'));\r\n        searchAndSort(savedCards);\r\n        return\r\n      } else {\r\n        // get local data from server for comparison\r\n        getUserArticles()\r\n          .then((res) => {\r\n            // loop cards and set article format to the same as the NewsAPI\r\n          let newCards = []\r\n          res.forEach((card) => {\r\n            const newCard = {\r\n              _id: card._id,\r\n              keyword: card.keyword,\r\n              publishedAt: card.date,\r\n              title: card.title,\r\n              description: card.text,\r\n              source: card.source,\r\n              url: card.link,\r\n              urlToImage: card.image,\r\n            }\r\n\r\n            newCards.push(newCard);\r\n          });\r\n          return newCards;\r\n          })\r\n          .then((newCards) => {\r\n            // send to sorting handler\r\n            localStorage.setItem('articles', JSON.stringify(newCards));\r\n            searchAndSort(newCards);\r\n            return;\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n        return\r\n      }\r\n    }\r\n    return\r\n  }\r\n\r\n  function searchEventHandler(e) {\r\n    e.preventDefault();\r\n    newsSearch();\r\n  }\r\n\r\n  function handleEnterKey(e) {\r\n    e.preventDefault()\r\n    if (e.key === 'Enter') {\r\n      searchEventHandler(e);\r\n    }\r\n    return\r\n  }\r\n\r\n  // search on dom mount\r\n  useEffect(() => {\r\n    const recentSearch = localStorage.getItem('recent-search-keyword');\r\n    if (recentSearch) {\r\n      searchRef.current.value = recentSearch;\r\n      newsSearch();\r\n      return\r\n    }\r\n    return\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isLoggedIn])\r\n\r\n  return (\r\n    <section className=\"search-container\">\r\n      <div className=\"search-container__width\">\r\n        <h2 className=\"search-container__title\">What's going on in the world?</h2>\r\n        <p className=\"search-container__subtitle\">Find the latest news on any topic and save them in your personal account</p>\r\n        <form onSubmit={searchEventHandler} className='search-bar'>\r\n          <input ref={searchRef} onKeyUp={handleEnterKey} type=\"text\" placeholder=\"Enter topic\" className={`search-bar__input ${disableInputs ? 'search-bar__input_disabled' : ''}`} disabled={disableInputs} />\r\n          <button type=\"submit\" className='search-bar__button'>Search</button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n\r\n  );\r\n}\r\n\r\nexport default SearchForm;","import React from 'react';\n\nconst About = () => {\n  return (\n    <section className=\"about\">\n      <div className=\"about__width\">\n        <div className=\"about__image\"></div>\n        <div className=\"about__text-container\">\n          <h2 className=\"about__title\">About the author</h2>\n          <p className=\"about__text\">\n            Danny is an electronic music producer, mix engineer, and web developer\n            from Salt Lake City, Utah. While his first love is making dance music,\n            Danny loves to program web apps, especially using front end frameworks\n            like Vue 3 and ReactJS.\n        </p>\n          <p className=\"about__text\">\n            Danny is currently pursuing a career in tech working part-time for\n            Adobe Systems as a security contractor. He's also building his own\n            company with his brother, Matt, that builds web apps that assists\n            people that are trying to pursue full-time careers as freelancers.\n        </p>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default About;","import React, { useEffect, useState } from 'react';\r\n\r\nconst NewsCard = ({ _id,\r\n  keyword,\r\n  date,\r\n  title,\r\n  description,\r\n  source,\r\n  url,\r\n  image,\r\n  isSaved,\r\n  isSavedNewsRoute,\r\n  isLoggedIn,\r\n  deleteArticleHandler,\r\n  saveArticle\r\n}) => {\r\n\r\n  const [isSavedIcon, toggleIsSavedIcon] = useState(false);\r\n  const [cardId, setCardId] = useState(\"\");\r\n\r\n  // Utility functions to help with formatting\r\n\r\n  const capitalize = (s) => {\r\n    if (typeof s !== 'string') return ''\r\n    return s.charAt(0).toUpperCase() + s.slice(1)\r\n  };\r\n\r\n  function formatDate() {\r\n    if (isSavedNewsRoute) {\r\n      return date.substr(0, 15);\r\n    } else {\r\n      return date.split(\"T\")[0];\r\n    }\r\n  };\r\n\r\n  // Click handlers\r\n\r\n  async function handleDelete() {\r\n    const cardDeleted = await deleteArticleHandler(cardId);\r\n    if (cardDeleted) {\r\n      toggleIsSavedIcon(false);\r\n      return\r\n    }\r\n    //otherwise throw error\r\n    // throw new Error('Save article request unsuccessful')\r\n  };\r\n\r\n  async function handleArticleSave() {\r\n    // prevent action if article is already saved\r\n    if (isSavedIcon) {\r\n      handleDelete()\r\n      return\r\n    } else {\r\n\r\n      // send article up to Main component to be handled\r\n\r\n      const savedArticleId = await saveArticle({\r\n        keyword: keyword,\r\n        title: title,\r\n        text: description,\r\n        date: date,\r\n        source: source,\r\n        link: url,\r\n        image: image,\r\n      })\r\n\r\n      if (savedArticleId) {\r\n        // if saveArticle returns true\r\n        toggleIsSavedIcon(true);\r\n        setCardId(savedArticleId)\r\n        return\r\n      } else {\r\n        toggleIsSavedIcon(false);\r\n        return\r\n      }\r\n    }\r\n  };\r\n\r\n  // Effect to check if article contains an isSaved properties, which is assigned during the api call\r\n  // This is only relevant when searching for cards on NewsApi, not local.\r\n\r\n  useEffect(() => {\r\n    if (isSaved) {\r\n      toggleIsSavedIcon(true);\r\n    };\r\n    return\r\n  }, [isSaved, toggleIsSavedIcon]);\r\n\r\n  // functions for conditional rendering of components\r\n\r\n  function deleteOrSave() {\r\n    if (isSavedNewsRoute && isLoggedIn) {\r\n      return (\r\n        <button onClick={handleDelete} className=\"news-card__delete-button\">\r\n          <span className=\"news-card__save-button-label\"><p>Remove from saved</p></span>\r\n        </button>\r\n      )\r\n    } else if (!isSavedNewsRoute && isLoggedIn) {\r\n      return (\r\n        <button onClick={(e) => { e.stopPropagation(); handleArticleSave() }} className={`news-card__save-button ${isSavedIcon ? 'news-card__save-button_active' : ''}`}></button>\r\n      )\r\n    } else {\r\n      return (\r\n        <button onClick={(e) => { e.stopPropagation(); handleArticleSave() }} className=\"news-card__save-button\">\r\n          <span className=\"news-card__save-button-label\"><p>Sign in to save articles</p></span>\r\n        </button>\r\n      )\r\n    }\r\n  }\r\n\r\n  function keywords() {\r\n    if (isSavedNewsRoute) {\r\n      return (\r\n        <div className=\"news-card__keyword\">\r\n          <p>{capitalize(keyword)}</p>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  // effect to set cardId to a dynamic state on mount\r\n\r\n  useEffect(() => {\r\n    if (_id) {\r\n      setCardId(_id);\r\n      return\r\n    } else {\r\n      setCardId(null);\r\n    }\r\n    return\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  return (\r\n    <li className=\"news-card\">\r\n      {deleteOrSave()}\r\n      <a className=\"news-card__anchor\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n        {keywords()}\r\n        <div className=\"news-card__image\" style={{\r\n          backgroundImage: `url(${image})`\r\n        }}></div>\r\n        <div className=\"news-card__info-container\">\r\n          <p className=\"news-card__date\">{formatDate()}</p>\r\n          <h3 className=\"news-card__title\">{title}</h3>\r\n          <p className=\"news-card__snippet\">{description}</p>\r\n          <p className=\"news-card__source\">{source}</p>\r\n        </div>\r\n      </a>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default NewsCard;","import React from 'react';\n\nconst NothingFound = ({ error }) => {\n  return (\n    <div className=\"nothing-found__container\">\n      <h2 className=\"nothing-found__title\">{error\n      ? \"Sorry, something went wrong during the request. There may be a connection issue or the server may be down. Please try again later\"\n      : \"Nothing Found\"}</h2>\n    </div>\n  );\n}\n\nexport default NothingFound;","import React, { useState } from 'react';\r\n\r\nimport NewsCard from '../NewsCard/NewsCard';\r\nimport NothingFound from '../NothingFound/NothingFound';\r\n\r\nimport { maxVisibleCards, incrementVisibleCardsVariable} from '../../utils/constants';\r\n\r\nconst NewsCardList = (props) => {\r\n  const [hideButton, toggleButton] = useState(false);\r\n\r\n  function incrementVisibleCards() {\r\n    if (props.visibleCards > maxVisibleCards) {\r\n      toggleButton(true);\r\n      return\r\n    } else {\r\n      const newVisibleCards = props.visibleCards + incrementVisibleCardsVariable;\r\n      props.setVisibleCards(newVisibleCards);\r\n    }\r\n\r\n  }\r\n\r\n  function renderCardList() {\r\n    if (props.cards.length === 0) {\r\n      return <NothingFound error={false} />\r\n    } else if (props.cards) {\r\n      return props.cards.slice(0, props.visibleCards).map((card) => {\r\n\r\n        return <NewsCard\r\n          key={card.url}\r\n          _id={card._id}\r\n          keyword={card.keyword}\r\n          date={card.publishedAt}\r\n          title={card.title}\r\n          description={card.description}\r\n          source={card.source.name}\r\n          url={card.url}\r\n          image={card.urlToImage}\r\n          isSaved={card.isSaved}\r\n          isSavedNewsRoute={props.isSavedNewsRoute}\r\n          isLoggedIn={props.isLoggedIn}\r\n          deleteArticleHandler={props.deleteArticleHandler}\r\n          saveArticle={props.saveArticle}\r\n          togglePopup={props.togglePopup}\r\n        />\r\n      });\r\n    } else {\r\n      return <NothingFound error={true} />\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className=\"news-card-list\">\r\n      <div className=\"news-card-list__width\">\r\n\r\n        {!props.isSavedNewsRoute\r\n          ? <h2 className=\"news-card-list__title\">\r\n            Search results\r\n            </h2>\r\n          : \"\"\r\n        }\r\n        <ul className=\"news-card-list__container\">\r\n          {\r\n            renderCardList()\r\n          }\r\n        </ul>\r\n\r\n\r\n        {!props.isSavedNewsRoute && !hideButton ? <button onClick={incrementVisibleCards} className=\"news-card-list__show-more\">Show more</button> : ''}\r\n\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default NewsCardList;","import React from 'react';\r\n\r\nconst Preloader = () => {\r\n  return (\r\n    <div className=\"circle-preloader__container\">\r\n      <i className=\"circle-preloader\"></i>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Preloader;\r\n\r\n","import React, { useState } from 'react';\r\n\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport About from '../About/About';\r\nimport NewsCardList from '../NewsCardList/NewsCardList';\r\nimport Preloader from '../Preloader/Preloader';\r\nimport NothingFound from '../NothingFound/NothingFound';\r\n\r\nconst Main = ({ isLoggedIn, isLoading, toggleIsLoading, handlePopup, addArticleHandler, getUserArticles, searchHandler, deleteArticleHandler }) => {\r\n\r\n  const [cards, setCards] = useState([]);\r\n  const [visibleCards, setVisibleCards] = useState(0);\r\n\r\n  async function saveArticle({ keyword, title, text, date, source, link, image }) {\r\n    if (!isLoggedIn) {\r\n      handlePopup()\r\n      return false\r\n    }\r\n\r\n    return addArticleHandler({\r\n      keyword,\r\n      title,\r\n      text,\r\n      date,\r\n      source,\r\n      link,\r\n      image,\r\n    })\r\n      .then((res) => {\r\n        if (res) {\r\n          localStorage.removeItem('articles');\r\n          return res._id;\r\n        }\r\n        return false;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n\r\n  }\r\n\r\n  function renderCardList() {\r\n    if (isLoading) {\r\n      return (\r\n        <Preloader />\r\n      )\r\n    } else if (!isLoading && visibleCards > 0) {\r\n      if (!cards) {\r\n        return <NothingFound error={true} />\r\n      } else if (cards.length === 0) {\r\n        return (\r\n          <NothingFound error={false} />\r\n        )\r\n      } else if (cards) {\r\n        return (\r\n          <NewsCardList\r\n            isSavedNewsRoute={false}\r\n            isLoggedIn={isLoggedIn}\r\n            cards={cards}\r\n            setCards={setCards}\r\n            visibleCards={visibleCards}\r\n            setVisibleCards={setVisibleCards}\r\n            saveArticle={saveArticle}\r\n            deleteArticleHandler={deleteArticleHandler}\r\n          />\r\n        )\r\n      }\r\n    }\r\n    return\r\n  }\r\n\r\n  return (\r\n    <div className=\"main\">\r\n      <SearchForm\r\n        setCards={setCards}\r\n        setVisibleCards={setVisibleCards}\r\n        toggleIsLoading={toggleIsLoading}\r\n        isLoggedIn={isLoggedIn}\r\n        getUserArticles={getUserArticles}\r\n        searchHandler={searchHandler}\r\n      />\r\n\r\n      {renderCardList()}\r\n\r\n      <About />\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;","import React, { useContext } from 'react';\r\n\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\n\r\nconst SavedNewsHeader = ({ savedCards, sortedKeywords }) => {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n  // utility function to capitalize strings\r\n  const capitalize = (s) => {\r\n    if (typeof s !== 'string') return ''\r\n    return s.charAt(0).toUpperCase() + s.slice(1)\r\n  }\r\n\r\n  function keywordList() {\r\n    // check array length and return appropriate string\r\n\r\n    if (sortedKeywords.length === 1) {\r\n      return `${capitalize(sortedKeywords[0])}`;\r\n    } else if (sortedKeywords.length === 2) {\r\n      return `${capitalize(sortedKeywords[0])} and ${capitalize(sortedKeywords[1])}`;\r\n    } else if (sortedKeywords.length === 3) {\r\n      return `${capitalize(sortedKeywords[0])}, ${capitalize(sortedKeywords[1])}, and ${capitalize(sortedKeywords[2])}`;\r\n    } else {\r\n      return `${capitalize(sortedKeywords[0])}, ${capitalize(sortedKeywords[1])}, and ${sortedKeywords.length - 2} others`;\r\n    };\r\n  }\r\n\r\n  return (\r\n    <section className='saved-news-header'>\r\n      <div className=\"saved-news-header__width\">\r\n        <p className=\"saved-news-header__label\">Saved articles</p>\r\n        <h2 className=\"saved-news-header__title\">\r\n          {currentUser.name}, you have {savedCards && savedCards.length > 0 ? savedCards.length : \"no\"} saved articles\r\n        </h2>\r\n        {\r\n          sortedKeywords && sortedKeywords.length > 0\r\n            ? <p className=\"saved-news-header__keyword-text\">\r\n              By keywords: <span className=\"saved-news-header__keywords\">{keywordList()}</span>\r\n            </p>\r\n            : \"\"\r\n        }\r\n\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SavedNewsHeader;","import React, { useCallback, useEffect, useState } from 'react';\r\nimport NewsCardList from '../NewsCardList/NewsCardList';\r\nimport Preloader from '../Preloader/Preloader';\r\nimport NothingFound from '../NothingFound/NothingFound';\r\nimport SavedNewsHeader from '../SavedNewsHeader/SavedNewsHeader';\r\n\r\nconst SavedNews = ({ isLoading, toggleIsLoading, isLoggedIn, deleteArticleHandler, getUserArticles }) => {\r\n\r\n  const [savedCards, setSavedCards] = useState();\r\n  const [sortedKeywords, setSortedKeywords] = useState([]);\r\n\r\n  // Delete button elevated state so cards can be rerendered after delete\r\n\r\n  function deleteCard(id) {\r\n    if (id) {\r\n      deleteArticleHandler(id)\r\n        .then(() => {\r\n          retrieveCards();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  // function to sort keywords by number of times that keyword was used\r\n\r\n  const returnKeywordRankings = (arr) => {\r\n    // don't run unless savedCards is set\r\n    if (arr) {\r\n      // extract keywords from savedCards and put in new array\r\n      let keywords = [];\r\n      arr.forEach((card) => {\r\n        const lowercase = card.keyword.toLowerCase();\r\n        keywords.push(lowercase);\r\n        return;\r\n      });\r\n      // sort new array and place in object\r\n      let result = {};\r\n      for (let i = 0; i < keywords.length; ++i) {\r\n        if (!result[keywords[i]])\r\n          result[keywords[i]] = 0;\r\n        ++result[keywords[i]];\r\n      }\r\n      // make a shallow copy of result that you can delete properties without messing with result.length\r\n      const keywordsCopy = { ...result }\r\n\r\n      // loop through object and delete top result from the shallow copy, then loop again\r\n\r\n      let sortedResult = [];\r\n      for (let i = 0; i < Object.keys(result).length; ++i) {\r\n        const reducedObj = Object.keys(keywordsCopy).reduce((a, b) => keywordsCopy[a] > keywordsCopy[b] ? a : b);\r\n        sortedResult.push(reducedObj);\r\n        delete keywordsCopy[reducedObj];\r\n      };\r\n\r\n      // THIS RETURNS AN ARRAY OF SORTED KEYWORDS, NOT A SORTED OBJECT\r\n\r\n      return sortedResult;\r\n\r\n    } else {\r\n      return\r\n    }\r\n  };\r\n\r\n  // Sort cards by keyword\r\n\r\n  function sortCardsByKeyword(refArray, objectToSort) {\r\n\r\n    const itemPositions = {};\r\n    for (const [index, id] of refArray.entries()) {\r\n      itemPositions[id] = index;\r\n    }\r\n\r\n    objectToSort.sort((a, b) => itemPositions[a.keyword] - itemPositions[b.keyword]);\r\n\r\n    return objectToSort;\r\n\r\n  }\r\n\r\n  // Effect to retrieve cards and set to proper values\r\n\r\n  const retrieveCards = useCallback(() => {\r\n    toggleIsLoading(true);\r\n    // Check local storage for articles\r\n    const cards = JSON.parse(localStorage.getItem('articles'));\r\n    if (cards) {\r\n        const keywordRankArray = returnKeywordRankings(cards);\r\n        setSortedKeywords(keywordRankArray);\r\n        setSavedCards(cards);\r\n        toggleIsLoading(false);\r\n    } else {\r\n      getUserArticles()\r\n        .then((res) => {\r\n          // loop cards and set article format to the same as the NewsAPI\r\n          let newCards = []\r\n          res.forEach((card) => {\r\n            const newCard = {\r\n              _id: card._id,\r\n              keyword: card.keyword,\r\n              publishedAt: card.date,\r\n              title: card.title,\r\n              description: card.text,\r\n              source: card.source,\r\n              url: card.link,\r\n              urlToImage: card.image,\r\n            }\r\n\r\n            newCards.push(newCard);\r\n            return\r\n          });\r\n          return newCards;\r\n        })\r\n        .then((newCards) => {\r\n          // sort cards by keyword\r\n          const keywordRankArray = returnKeywordRankings(newCards);\r\n          setSortedKeywords(keywordRankArray);\r\n          return sortCardsByKeyword(keywordRankArray, newCards);\r\n        })\r\n        .then((sortedCards) => {\r\n          // set sorted cards into localstorage and onto the DOM\r\n          localStorage.setItem('articles', JSON.stringify(sortedCards));\r\n          setSavedCards(sortedCards);\r\n          toggleIsLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }, [toggleIsLoading, getUserArticles])\r\n\r\n  // Render cards when they arrive\r\n\r\n  function renderCardList() {\r\n    // check if there are cards\r\n    // if you don't, it will crash, since savedCards doesn't have length\r\n    if (!savedCards) {\r\n      return <NothingFound error={true} />\r\n    } else {\r\n      if (isLoading) {\r\n        return (\r\n          <Preloader />\r\n        )\r\n      } else if (!isLoading) {\r\n        if (savedCards.length === 0) {\r\n          return (\r\n            <NothingFound error={false} />\r\n          )\r\n        } else if (savedCards) {\r\n          return (\r\n            <NewsCardList\r\n              isSavedNewsRoute={true}\r\n              isLoggedIn={isLoggedIn}\r\n              cards={savedCards}\r\n              setCards={setSavedCards}\r\n              visibleCards={savedCards.length}\r\n              setVisibleCards={null}\r\n              deleteArticleHandler={deleteCard}\r\n              sortedKeywords={sortedKeywords}\r\n\r\n            />\r\n          )\r\n        }\r\n      }\r\n      return\r\n    }\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n    retrieveCards();\r\n\r\n  }, [retrieveCards]);\r\n\r\n\r\n  return (\r\n    <section className=\"saved-news\">\r\n\r\n      <SavedNewsHeader\r\n        savedCards={savedCards}\r\n        sortedKeywords={sortedKeywords}\r\n      />\r\n\r\n\r\n      {renderCardList()}\r\n\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SavedNews;","import React, { useState, useRef } from 'react';\r\n\r\nconst PopupWithForm = ({\r\n  isRegisterPopup,\r\n  toggleIsRegisterPopup,\r\n  isFormPopupOpen,\r\n  toggleFormPopup,\r\n  toggleRegisterSuccessPopup,\r\n  togglePopup,\r\n  toggleLoggedIn,\r\n  toggleRegisterSuccess,\r\n  setCurrentUser,\r\n  registerHandler,\r\n  signinHandler,\r\n  getUserInfo,\r\n}) => {\r\n\r\n  // State constants\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [signinFailed, toggleSigninFailed] = useState(false);\r\n  const [badRequest, toggleBadRequest] = useState(false);\r\n  const [disableInputs, toggleInputDisable] = useState(false);\r\n\r\n  // Ref assignments\r\n\r\n  const emailRef = useRef()\r\n  const passwordRef = useRef();\r\n  const nameRef = useRef();\r\n\r\n  // Submit handlers\r\n\r\n  function handleRegisterSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    registerHandler(\r\n      emailRef.current.value,\r\n      passwordRef.current.value,\r\n      nameRef.current.value)\r\n      .then((res) => {\r\n        if (res) {\r\n          // Toggle states for register success popup\r\n          toggleRegisterSuccess(true);\r\n          toggleFormPopup(false);\r\n          toggleRegisterSuccessPopup(true);\r\n        } else {\r\n          // Toggle states for register failure popup\r\n          toggleRegisterSuccess(false);\r\n          toggleFormPopup(false);\r\n          toggleRegisterSuccessPopup(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        // Toggle states for register failure popup\r\n\r\n        toggleRegisterSuccess(false);\r\n        toggleFormPopup(false);\r\n        toggleRegisterSuccessPopup(true);\r\n\r\n        console.log(err);\r\n      })\r\n  }\r\n\r\n  function handleSigninSubmit(e) {\r\n    e.preventDefault()\r\n    toggleInputDisable(true);\r\n    signinHandler(emailRef.current.value, passwordRef.current.value)\r\n      .then((res) => {\r\n        if (res) {\r\n          localStorage.setItem('token', res.token);\r\n          getUserInfo()\r\n            .then((res) => {\r\n              setCurrentUser(res);\r\n            })\r\n            .then(() => {\r\n              emailRef.current.value = \"\";\r\n              passwordRef.current.value = \"\";\r\n              toggleSigninFailed(false);\r\n              toggleInputDisable(false);\r\n              toggleFormPopup(false);\r\n              toggleLoggedIn(true);\r\n              closePopup();\r\n            })\r\n            .catch(() => {\r\n              toggleSigninFailed(true);\r\n              toggleInputDisable(false);\r\n              toggleBadRequest(true);\r\n            })\r\n        }\r\n        else {\r\n          toggleSigninFailed(true);\r\n          toggleInputDisable(false);\r\n          toggleBadRequest(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err === \"Error: 400\") {\r\n          toggleSigninFailed(true);\r\n          toggleBadRequest(true);\r\n          toggleInputDisable(false);\r\n        } else {\r\n          toggleSigninFailed(true);\r\n          toggleInputDisable(false);\r\n          console.log(err);\r\n        }\r\n      })\r\n  }\r\n\r\n  // validation logic\r\n\r\n  function isEmail(email) {\r\n    let re = /\\S+@\\S+\\.\\S+/;\r\n    return re.test(email);\r\n  }\r\n\r\n\r\n  function isStrongPassword(password) {\r\n    const re = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d\\w\\W]{8,}$/\r\n    return re.test(password)\r\n  }\r\n\r\n  // Input validation\r\n\r\n  function validateInputs(email, password, username = null) {\r\n\r\n    const errors = {};\r\n\r\n    if (!email || !isEmail(email)) {\r\n      errors.email = \"Invalid email address\";\r\n    }\r\n\r\n    if (!password) {\r\n      errors.password = \"Password is a required field\";\r\n    } else if (!isStrongPassword(password, { minSymbols: 0 })) {\r\n      errors.password = \"Password must be at least 8 characters and contain a number and a capital letter.\";\r\n    }\r\n\r\n    if (username === null) {\r\n\r\n    } else if (!username) {\r\n      errors.username = \"Username is a required field.\";\r\n    } else if (username.length < 5) {\r\n      errors.username = \"Username must be at least 6 characters\";\r\n    }\r\n\r\n    return errors;\r\n  }\r\n\r\n  function registerFormOnChange() {\r\n    const validatedInputs = validateInputs(emailRef.current.value, passwordRef.current.value, nameRef.current.value)\r\n    if (Object.keys(validatedInputs).length === 0) {\r\n      setErrors(false);\r\n      return\r\n    }\r\n    setErrors(validatedInputs);\r\n    return\r\n  }\r\n\r\n  function signinFormOnChange() {\r\n    const validatedInputs = validateInputs(emailRef.current.value, passwordRef.current.value)\r\n    if (Object.keys(validatedInputs).length === 0) {\r\n      setErrors(false);\r\n      return\r\n    }\r\n\r\n    setErrors(validatedInputs);\r\n    return\r\n  }\r\n\r\n  // Misc utility functions (toggling popups, conditional rendering, etc)\r\n\r\n  function closePopup() {\r\n    togglePopup(false);\r\n  }\r\n\r\n  function toggleRegisterPopup() {\r\n    toggleBadRequest(false);\r\n    toggleIsRegisterPopup(!isRegisterPopup);\r\n  }\r\n\r\n  // Conditional rendering of Sign up or Sign in form\r\n\r\n  function isRegister() {\r\n    if (isRegisterPopup) {\r\n      return (\r\n        <>\r\n          <h2 className=\"popup__title\">Sign up</h2>\r\n          <form onChange={() => registerFormOnChange()} onSubmit={handleRegisterSubmit} className=\"popup__form popup__form_register form\">\r\n            <label className=\"form__label\" htmlFor=\"register-email\">Email</label>\r\n            <input className={`form__input ${disableInputs ? 'form__input_disabled' : ''}`} disabled={disableInputs ? true : false} type=\"email\" id=\"register-email\" ref={emailRef} placeholder=\"Email\" required></input>\r\n            {errors.email ? <span className=\"form__error\">{errors.email}</span> : ''}\r\n\r\n            <label className=\"form__label\" htmlFor=\"register-password\">Password</label>\r\n            <input className={`form__input ${disableInputs ? 'form__input_disabled' : ''}`} disabled={disableInputs ? true : false} type=\"password\" id=\"register-password\" ref={passwordRef} placeholder=\"Password\" required></input>\r\n            {errors.password ? <span className=\"form__error\">{errors.password}</span> : ''}\r\n\r\n            <label className=\"form__label\" htmlFor=\"register-username\">Username</label>\r\n            <input className={`form__input ${disableInputs ? 'form__input_disabled' : ''}`} disabled={disableInputs ? true : false} type=\"text\" id=\"register-username\" ref={nameRef} placeholder=\"Username\" required></input>\r\n            {errors.username ? <span className=\"form__error\">{errors.username}</span> : ''}\r\n\r\n            <button type=\"submit\" className={`popup__submit ${!errors ? 'popup__submit_active' : ''}`}>{isRegisterPopup ? \"Sign up\" : \"Sign in\"}</button>\r\n          </form>\r\n\r\n          <p className=\"popup__swap-form-text\">or <button onClick={toggleRegisterPopup} className=\"popup__swap-form-button\">Sign in</button></p>\r\n        </>\r\n      )\r\n    } else {\r\n      return (\r\n        <>\r\n          <h2 className=\"popup__title\">Sign in</h2>\r\n          <form onChange={signinFormOnChange} onSubmit={handleSigninSubmit} className=\"popup__form popup__form_signin form\">\r\n            <label className=\"form__label\" htmlFor=\"register-email\">Email</label>\r\n            <input className={`form__input ${disableInputs ? 'form__input_disabled' : ''}`} disabled={disableInputs ? true : false} type=\"email\" id=\"register-email\" ref={emailRef} placeholder=\"Email\" required></input>\r\n            {errors.email ? <span className=\"form__error\">{errors.email}</span> : ''}\r\n\r\n            <label className=\"form__label\" htmlFor=\"register-password\">Password</label>\r\n            <input className={`form__input ${disableInputs ? 'form__input_disabled' : ''}`} disabled={disableInputs ? true : false} type=\"password\" id=\"register-password\" ref={passwordRef} placeholder=\"Password\" required></input>\r\n            {errors.password ? <span className=\"form__error\">{errors.password}</span> : ''}\r\n\r\n            {signinFailed ? <span className=\"form__error\">{badRequest ? 'Invalid email or password' : 'Something went wrong, please try again'}</span> : ''}\r\n\r\n            <button type=\"submit\" className={`popup__submit ${!errors ? 'popup__submit_active' : ''}`}>{isRegisterPopup ? \"Sign up\" : \"Sign in\"}</button>\r\n          </form>\r\n\r\n\r\n          <p className=\"popup__swap-form-text\">or <button onClick={toggleRegisterPopup} className=\"popup__swap-form-button\">Sign up</button></p>\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  // Actual component, lol\r\n\r\n  return (\r\n    <>\r\n      {isFormPopupOpen ? isRegister() : \"\"}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\n\r\nconst Popup = (props) => {\r\n\r\n  function closePopup() {\r\n    props.togglePopup(false)\r\n    props.toggleFormPopup(false);\r\n  }\r\n  return (\r\n    <section className={`modal ${props.isPopupOpen ? 'modal_visible' : ''}`}>\r\n    <div className={`popup ${props.isPopupOpen ? 'popup_visible' : ''}`}>\r\n      <div className=\"form-width\">\r\n        <i className=\"popup__exit\" onClick={closePopup}></i>\r\n\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  </section>\r\n   );\r\n}\r\n\r\nexport default Popup;","const main = {\r\n  url: 'https://api.danny-news-explorer.students.nomoreparties.site',\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n  credentialPreference: 'include',\r\n}\r\n\r\nclass Api {\r\n  constructor({ url, headers, credentialPreference }) {\r\n    this._url = url;\r\n    this._headers = headers;\r\n    this._credential = credentialPreference;\r\n  }\r\n\r\n  // Private functions\r\n\r\n  _checkResponse(res) {\r\n    return (res.ok ? res.json() : Promise.reject(`Error: ${res.status}`));\r\n  }\r\n\r\n  // User and registration\r\n\r\n  register(email, password, name) {\r\n    return fetch(`${this._url}/signup`, {\r\n      method: \"POST\",\r\n      credentials: this._credential,\r\n      headers: this._headers,\r\n      body: JSON.stringify({ email, password, name })\r\n    })\r\n      .then((res) => {\r\n        return this._checkResponse(res);\r\n      })\r\n  }\r\n\r\n  signin(email, password) {\r\n    return fetch(`${this._url}/signin`, {\r\n      method: \"POST\",\r\n      credentials: this._credential,\r\n      headers: this._headers,\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n      .then((res) => {\r\n        return this._checkResponse(res);\r\n      })\r\n  }\r\n\r\n  signout() {\r\n    return fetch(`${this._url}/users/logout`, {\r\n      credentials: this._credential,\r\n      headers: this._headers,\r\n    })\r\n      .then((res) => {\r\n        return this._checkResponse(res);\r\n      })\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      credentials: this._credential,\r\n      headers: this._headers,\r\n    })\r\n      .then((res => {\r\n        return this._checkResponse(res);\r\n      }));\r\n  }\r\n\r\n  // Article CRUD\r\n\r\n  getArticles() {\r\n    return fetch(`${this._url}/articles`, {\r\n      credentials: this._credential,\r\n      headers: this._headers,\r\n    })\r\n      .then((res) => {\r\n        return this._checkResponse(res);\r\n      })\r\n  }\r\n\r\n  addArticle(article) {\r\n    return fetch(`${this._url}/articles`, {\r\n      credentials: this._credential,\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(article),\r\n    })\r\n      .then((res) => {\r\n        return this._checkResponse(res);\r\n      })\r\n  }\r\n\r\n  deleteArticle(articleId) {\r\n    return fetch(`${this._url}/articles/${articleId}`, {\r\n      credentials: this._credential,\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    })\r\n      .then((res) => {\r\n        return this._checkResponse(res);\r\n      })\r\n  }\r\n\r\n}\r\n\r\nconst api = new Api(main);\r\n\r\nexport default api;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.isLoggedIn ? <Component {...props} /> : <Redirect to={{\r\n          pathname: '/',\r\n          state: {\r\n            redirected: true,\r\n          }\r\n        }} />\r\n      }\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;","import { newsApiInfo } from './constants';\r\n\r\nclass NewsApi {\r\n  constructor({ url, endpoint, auth, pageSize, apiKey }) {\r\n    this._url = url;\r\n    this._endpoint = endpoint;\r\n    this._auth = auth;\r\n    this._pageSize = pageSize;\r\n    this._apiKey = apiKey\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    return (res.ok ? res.json() : Promise.reject(`Error: ${res.status}`));\r\n  }\r\n\r\n  _getFromDate() {\r\n    const dateObj = new Date(new Date().setDate(new Date().getDate()-5));\r\n    const month = dateObj.getUTCMonth() + 1; //months from 1-12\r\n    const day = dateObj.getUTCDate();\r\n    const year = dateObj.getUTCFullYear();\r\n\r\n    const newdate = year + \"/\" + month + \"/\" + day;\r\n    return newdate;\r\n  }\r\n\r\n  _getToDate() {\r\n    const dateObj = new Date();\r\n    const month = dateObj.getUTCMonth() + 1; //months from 1-12\r\n    const day = dateObj.getUTCDate();\r\n    const year = dateObj.getUTCFullYear();\r\n\r\n    const newdate = year + \"/\" + month + \"/\" + day;\r\n    return newdate;\r\n  }\r\n\r\n  search(keyword) {\r\n    return fetch(`${this._url}${this._endpoint}?q=${keyword}&from=${this._getFromDate()}&to=${this._getToDate()}&pageSize=${this._pageSize}&apiKey=${this._apiKey}`, {\r\n      headers: this._auth\r\n    })\r\n      .then((res) => {\r\n        return this._checkResponse(res)\r\n      })\r\n  }\r\n}\r\n\r\nconst newsApi = new NewsApi(newsApiInfo);\r\n\r\nexport default newsApi;","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom';\r\n\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext'\r\nimport Header from '../Header/Header';\r\nimport Footer from '../Footer/Footer';\r\nimport Main from '../Main/Main';\r\nimport SavedNews from '../SavedNews/SavedNews';\r\nimport PopupWithForm from '../PopupWithForm/PopupWithForm';\r\nimport Popup from '../Popup/Popup';\r\n\r\nimport api from '../../utils/MainApi';\r\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\r\nimport Preloader from '../Preloader/Preloader';\r\nimport NothingFound from '../NothingFound/NothingFound';\r\nimport newsApi from '../../utils/NewsApi';\r\n\r\n\r\n\r\nconst App = () => {\r\n  const [currentUser, setCurrentUser] = useState({})\r\n  const [isLoggedIn, toggleLoggedIn] = useState(null);\r\n  const [isRegisterPopup, toggleIsRegisterPopup] = useState(false);\r\n  const [isPopupOpen, togglePopup] = useState(false);\r\n  const [isFormPopupOpen, toggleFormPopup] = useState(false);\r\n  const [isRegisterSuccessPopupOpen, toggleRegisterSuccessPopup] = useState(false);\r\n  const [isRegisterSuccess, toggleRegisterSuccess] = useState(false);\r\n  const [isLoading, toggleIsLoading] = useState(false);\r\n  const [serverError, toggleServerError] = useState(null);\r\n  const [isNavOpen, toggleNav] = useState(false);\r\n\r\n\r\n  function registrationSuccessToSignin() {\r\n    toggleIsRegisterPopup(false);\r\n    toggleRegisterSuccessPopup(false);\r\n    toggleFormPopup(true);\r\n  }\r\n  function registrationFailRedirect() {\r\n    toggleIsRegisterPopup(true);\r\n    toggleRegisterSuccessPopup(false);\r\n    toggleFormPopup(true);\r\n  }\r\n\r\n  const handlePopup = useCallback(() => {\r\n    togglePopup(true);\r\n    toggleFormPopup(true);\r\n    toggleIsRegisterPopup(false);\r\n    toggleNav(false);\r\n  }, [togglePopup, toggleFormPopup, toggleIsRegisterPopup, toggleNav])\r\n\r\n  // api handlers\r\n\r\n  async function getUserInfo() {\r\n    const returnedUserInfo = await api.getUserInfo();\r\n    return returnedUserInfo;\r\n  }\r\n\r\n  function registerHandler(email, password, name) {\r\n    return api.register(email, password, name);\r\n  }\r\n\r\n  function signinHandler(email, password) {\r\n    return api.signin(email, password);\r\n  }\r\n\r\n  function signoutHandler() {\r\n    localStorage.clear();\r\n    return api.signout();\r\n  }\r\n\r\n  function getUserArticles() {\r\n    localStorage.removeItem('articles');\r\n    return api.getArticles();\r\n  }\r\n\r\n  function deleteArticleHandler(id) {\r\n    if (id) {\r\n      localStorage.removeItem('articles');\r\n      return api.deleteArticle(id);\r\n    } else {\r\n      throw new Error('card ID not submitted');\r\n    }\r\n  }\r\n\r\n  function addArticleHandler(article) {\r\n    if (article) {\r\n      return api.addArticle(article);\r\n    } else {\r\n      throw new Error('No article submitted');\r\n    }\r\n  }\r\n\r\n  async function searchHandler(keyword) {\r\n    return newsApi.search(keyword);\r\n  }\r\n\r\n  function checkIsLoggedInBeforeRender() {\r\n    if (isLoggedIn === null && serverError === null) {\r\n      return (\r\n\r\n        <Preloader/>\r\n\r\n      )\r\n    } else if (serverError) {\r\n      return (\r\n\r\n        <NothingFound error={true}/>\r\n\r\n      )\r\n    } else {\r\n      return (\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n      <div className='app'>\r\n        <div className='page'>\r\n\r\n          <Router>\r\n            <Switch>\r\n              <Route exact path='/'>\r\n                <Header\r\n                  isLoggedIn={isLoggedIn}\r\n                  toggleLoggedIn={toggleLoggedIn}\r\n                  isPopupOpen={isPopupOpen}\r\n                  isFormPopupOpen={isFormPopupOpen}\r\n                  toggleIsRegisterPopup={toggleIsRegisterPopup}\r\n                  togglePopup={togglePopup}\r\n                  toggleFormPopup={toggleFormPopup}\r\n                  isSavedNewsRoute={false}\r\n                  signoutHandler={signoutHandler}\r\n                  handlePopup={handlePopup}\r\n                  toggleNav={toggleNav}\r\n                  isNavOpen={isNavOpen}\r\n                />\r\n\r\n                <Main\r\n                  isLoggedIn={isLoggedIn}\r\n                  isLoading={isLoading}\r\n                  toggleIsLoading={toggleIsLoading}\r\n                  isPopupOpen={isPopupOpen}\r\n                  isFormPopupOpen={isFormPopupOpen}\r\n                  togglePopup={togglePopup}\r\n                  toggleFormPopup={toggleFormPopup}\r\n                  getUserArticles={getUserArticles}\r\n                  addArticleHandler={addArticleHandler}\r\n                  searchHandler={searchHandler}\r\n                  deleteArticleHandler={deleteArticleHandler}\r\n                  handlePopup={handlePopup}\r\n                />\r\n\r\n                <Footer />\r\n              </Route>\r\n\r\n              <Route exact path=\"/saved-news\">\r\n                <Header\r\n                  isLoggedIn={isLoggedIn}\r\n                  isSavedNewsRoute={true}\r\n                  isPopupOpen={isPopupOpen}\r\n                  isFormPopupOpen={isFormPopupOpen}\r\n                  toggleIsRegisterPopup={toggleIsRegisterPopup}\r\n                  toggleFormPopup={toggleFormPopup}\r\n                  togglePopup={togglePopup}\r\n                  toggleLoggedIn={toggleLoggedIn}\r\n                  signoutHandler={signoutHandler}\r\n                  handlePopup={handlePopup}\r\n                  toggleNav={toggleNav}\r\n                  isNavOpen={isNavOpen}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  component={SavedNews}\r\n                  isLoggedIn={isLoggedIn}\r\n                  isLoading={isLoading}\r\n                  toggleIsLoading={toggleIsLoading}\r\n                  toggleFormPopup={toggleFormPopup}\r\n                  togglePopup={togglePopup}\r\n                  getUserArticles={getUserArticles}\r\n                  deleteArticleHandler={deleteArticleHandler}\r\n                  addArticleHandler={addArticleHandler}\r\n                  handlePopup={handlePopup}\r\n                />\r\n\r\n                <Footer />\r\n\r\n              </Route>\r\n              <Redirect from=\"*\" to=\"/\" />\r\n            </Switch>\r\n          </Router>\r\n          {isFormPopupOpen\r\n            ? <Popup\r\n              togglePopup={togglePopup}\r\n              toggleFormPopup={toggleFormPopup}\r\n              isPopupOpen={isPopupOpen}\r\n            >\r\n              <PopupWithForm\r\n                isRegisterPopup={isRegisterPopup}\r\n                toggleIsRegisterPopup={toggleIsRegisterPopup}\r\n                isFormPopupOpen={isFormPopupOpen}\r\n                toggleFormPopup={toggleFormPopup}\r\n                isRegisterSuccessPopupOpen={isRegisterSuccessPopupOpen}\r\n                toggleRegisterSuccessPopup={toggleRegisterSuccessPopup}\r\n                togglePopup={togglePopup}\r\n                toggleLoggedIn={toggleLoggedIn}\r\n                isRegisterSuccess={isRegisterSuccess}\r\n                toggleRegisterSuccess={toggleRegisterSuccess}\r\n                setCurrentUser={setCurrentUser}\r\n                registerHandler={registerHandler}\r\n                signinHandler={signinHandler}\r\n                getUserInfo={getUserInfo}\r\n              />\r\n            </Popup>\r\n            : \"\"}\r\n\r\n          {isRegisterSuccessPopupOpen\r\n            ? <Popup\r\n              isPopupOpen={isPopupOpen}\r\n              togglePopup={togglePopup}\r\n              toggleFormPopup={toggleFormPopup}\r\n            >\r\n              {isRegisterSuccess\r\n                ?\r\n                <>\r\n                  <h2 className=\"popup__title\">Registration completed successfully!</h2>\r\n                  <button className=\"popup__swap-form-text popup__swap-form-button\" onClick={registrationSuccessToSignin}>Sign in</button>\r\n                </>\r\n                :\r\n                <>\r\n                  <h2 className=\"popup__title\">Oops! Something went wrong</h2>\r\n                  <button className=\"popup__swap-form-text popup__swap-form-button\" onClick={registrationFailRedirect}>Try again</button>\r\n                </>\r\n              }\r\n\r\n            </Popup>\r\n            : \"\"}\r\n\r\n        </div>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n      )\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      getUserInfo()\r\n      .then((res) => {\r\n        if (res) {\r\n          setCurrentUser(res);\r\n          toggleServerError(false);\r\n          toggleLoggedIn(true);\r\n          return\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err === 'Error: 401') {\r\n          toggleLoggedIn(false);\r\n          toggleServerError(false);\r\n        } else {\r\n          toggleServerError(true);\r\n          console.log(err);\r\n          return\r\n        }\r\n      })\r\n      return;\r\n    }\r\n    toggleLoggedIn(false);\r\n    toggleServerError(false);\r\n    return;\r\n  }, [])\r\n\r\n  return checkIsLoggedInBeforeRender();\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\n\nimport App from './components/App/App.js';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}